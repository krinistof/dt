{% if candidates.is_empty() %}
    <p>No songs in the queue yet.</p>
{% else %}
    {% for candidate in candidates %}
    <div class="candidate-card" id="candidate-{{ candidate.id }}">
        <span class="candidate-name">{{ candidate.name }}</span>
        <div class="vote-area">
            <span class="score">Score: {{ candidate.score }}</span>

            <form hx-post="/vote"
                  hx-target="#song-queue"
                  hx-swap="innerHTML"
                  hx-trigger="change delay:500ms" {# Or mouseup, input delay:500ms #}
                  style="display: inline-block; margin-left: 10px;"
                  >

                <input type="hidden" name="voter_id" value="{{ voter_id }}">

                <input type="hidden" name="song_id" value="{{ candidate.id }}">

                {% let current_vote = candidate.voter_decision.unwrap_or(0) %}
                <input type="range" min="-127" max="127"
                       value="{{ current_vote }}"
                       name="decision"
                       style="width: 150px; vertical-align: middle;"
                       title="Vote: Drag to set score (-127 to 127)"
                       data-value-display-id="slider-value-{{ candidate.id }}"
                       oninput="document.getElementById(this.dataset.valueDisplayId).textContent = this.value"
                       >
                <span style="margin-left: 5px; min-width: 30px; display: inline-block;" id="slider-value-{{ candidate.id }}">{{ current_vote }}</span>

            </form>
        </div>
    </div>
    {% endfor %}
{% endif %}
